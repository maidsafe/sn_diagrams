<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: ml Pages: 1 -->
<svg width="1558pt" height="676pt"
 viewBox="0.00 0.00 1557.50 676.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 672)">
<title>ml</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-672 1553.5,-672 1553.5,4 -4,4"/>
<!-- ndSharedBRB -->
<g id="node1" class="node"><title>ndSharedBRB</title>
<g id="a_node1_0"><a xlink:href="https://github.com/maidsafe/brb_node_qp2p/blob/master/src/brb_node.rs#:~:text=struct%20SharedBRB" xlink:title="&lt;TABLE&gt;">
<polygon fill="lightblue" stroke="none" points="430,-625.5 430,-662.5 935,-662.5 935,-625.5 430,-625.5"/>
<polygon fill="none" stroke="black" points="430,-625.5 430,-662.5 935,-662.5 935,-625.5 430,-625.5"/>
<text text-anchor="start" x="641.5" y="-641.3" font-family="Arial" font-weight="bold" font-size="14.00">SharedBRB</text>
<polygon fill="white" stroke="none" points="430,-588.5 430,-625.5 935,-625.5 935,-588.5 430,-588.5"/>
<polygon fill="none" stroke="black" points="430,-588.5 430,-625.5 935,-625.5 935,-588.5 430,-588.5"/>
<text text-anchor="start" x="441" y="-603.3" font-family="Arial" font-size="14.00">&#45; brb: Arc&lt;Mutex&lt;BRB&gt;&gt;</text>
<polygon fill="white" stroke="none" points="430,-371.5 430,-588.5 935,-588.5 935,-371.5 430,-371.5"/>
<polygon fill="none" stroke="black" points="430,-371.5 430,-588.5 935,-588.5 935,-371.5 430,-371.5"/>
<text text-anchor="start" x="441" y="-566.3" font-family="Arial" font-size="14.00">&#45; new() &#45;&gt; Self</text>
<text text-anchor="start" x="441" y="-551.3" font-family="Arial" font-size="14.00">&#45; actor(&amp;self) &#45;&gt; Actor</text>
<text text-anchor="start" x="441" y="-536.3" font-family="Arial" font-size="14.00">&#45; add(&amp;self, v: Value) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="441" y="-521.3" font-family="Arial" font-size="14.00">&#45; rm(&amp;self, v: Value) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="441" y="-506.3" font-family="Arial" font-size="14.00">&#45; peers(&amp;self) &#45;&gt; BTreeSet&lt;Actor&gt;</text>
<text text-anchor="start" x="441" y="-491.3" font-family="Arial" font-size="14.00">&#45; trust_peer(&amp;mut self, peer: Actor)</text>
<text text-anchor="start" x="441" y="-476.3" font-family="Arial" font-size="14.00">&#45; untrust_peer(&amp;mut self, peer: Actor)</text>
<text text-anchor="start" x="441" y="-461.3" font-family="Arial" font-size="14.00">&#45; request_join(&amp;mut self, actor: Actor) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="441" y="-446.3" font-family="Arial" font-size="14.00">&#45; request_leave(&amp;mut self, actor: Actor) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="441" y="-431.3" font-family="Arial" font-size="14.00">&#45; anti_entropy(&amp;mut self, peer: Actor) &#45;&gt; Option&lt;Packet&gt;</text>
<text text-anchor="start" x="441" y="-416.3" font-family="Arial" font-size="14.00">&#45; exec_op(&amp;self, op: &lt;State as BRBDataType&lt;Actor&gt;&gt;::Op) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="441" y="-401.3" font-family="Arial" font-size="14.00">&#45; apply(&amp;self, packet: Packet) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="441" y="-386.3" font-family="Arial" font-size="14.00">&#45; read(&amp;self) &#45;&gt; HashSet&lt;Value&gt;</text>
<polygon fill="none" stroke="black" points="428.5,-371 428.5,-664 935.5,-664 935.5,-371 428.5,-371"/>
</a>
</g>
</g>
<!-- ndRepl -->
<g id="node2" class="node"><title>ndRepl</title>
<g id="a_node2_1"><a xlink:href="https://github.com/maidsafe/brb_node_qp2p/blob/master/src/brb_node.rs#:~:text=struct%20Repl" xlink:title="&lt;TABLE&gt;">
<polygon fill="lightblue" stroke="none" points="9,-288.5 9,-325.5 573,-325.5 573,-288.5 9,-288.5"/>
<polygon fill="none" stroke="black" points="9,-288.5 9,-325.5 573,-325.5 573,-288.5 9,-288.5"/>
<text text-anchor="start" x="275.5" y="-304.3" font-family="Arial" font-weight="bold" font-size="14.00">Repl</text>
<polygon fill="white" stroke="none" points="9,-236.5 9,-288.5 573,-288.5 573,-236.5 9,-236.5"/>
<polygon fill="none" stroke="black" points="9,-236.5 9,-288.5 573,-288.5 573,-236.5 9,-236.5"/>
<text text-anchor="start" x="20" y="-266.3" font-family="Arial" font-size="14.00">&#45; state: SharedBRB</text>
<text text-anchor="start" x="20" y="-251.3" font-family="Arial" font-size="14.00">&#45; network_tx: mpsc::Sender&lt;RouterCmd&gt;</text>
<polygon fill="white" stroke="none" points="9,-4.5 9,-236.5 573,-236.5 573,-4.5 9,-4.5"/>
<polygon fill="none" stroke="black" points="9,-4.5 9,-236.5 573,-236.5 573,-4.5 9,-4.5"/>
<text text-anchor="start" x="20" y="-214.3" font-family="Arial" font-size="14.00">&#45; new(state: SharedBRB, network_tx: mpsc::Sender&lt;RouterCmd&gt;) &#45;&gt; Self</text>
<text text-anchor="start" x="20" y="-199.3" font-family="Arial" font-size="14.00">&#45; after_command(&amp;mut self, _line: &amp;Line, result: CommandResult) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-184.3" font-family="Arial" font-size="14.00">&#45; peer(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-169.3" font-family="Arial" font-size="14.00">&#45; peers(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-154.3" font-family="Arial" font-size="14.00">&#45; trust(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-139.3" font-family="Arial" font-size="14.00">&#45; untrust(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-124.3" font-family="Arial" font-size="14.00">&#45; join(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-109.3" font-family="Arial" font-size="14.00">&#45; leave(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-94.3" font-family="Arial" font-size="14.00">&#45; anti_entropy(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-79.3" font-family="Arial" font-size="14.00">&#45; retry(&amp;mut self, _args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-64.3" font-family="Arial" font-size="14.00">&#45; add(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-49.3" font-family="Arial" font-size="14.00">&#45; remove(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-34.3" font-family="Arial" font-size="14.00">&#45; read(&amp;mut self, _args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-19.3" font-family="Arial" font-size="14.00">&#45; dbg(&amp;mut self, _args: &amp;[String]) &#45;&gt; CommandResult</text>
<polygon fill="none" stroke="black" points="8,-4 8,-327 574,-327 574,-4 8,-4"/>
</a>
</g>
</g>
<!-- ndSharedBRB&#45;&gt;ndRepl -->
<g id="edge1" class="edge"><title>ndSharedBRB&#45;&gt;ndRepl</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M514.763,-366.799C504.576,-357.681 494.284,-348.468 484.002,-339.264"/>
<polygon fill="black" stroke="black" points="483.912,-339.184 476.774,-338.162 474.971,-331.18 482.11,-332.201 483.912,-339.184"/>
</g>
<!-- ndRouter -->
<g id="node3" class="node"><title>ndRouter</title>
<g id="a_node3_2"><a xlink:href="https://github.com/maidsafe/brb_node_qp2p/blob/master/src/brb_node.rs#:~:text=struct%20Router" xlink:title="&lt;TABLE&gt;">
<polygon fill="lightblue" stroke="none" points="609,-266.5 609,-303.5 1196,-303.5 1196,-266.5 609,-266.5"/>
<polygon fill="none" stroke="black" points="609,-266.5 609,-303.5 1196,-303.5 1196,-266.5 609,-266.5"/>
<text text-anchor="start" x="879" y="-282.3" font-family="Arial" font-weight="bold" font-size="14.00">Router</text>
<polygon fill="white" stroke="none" points="609,-154.5 609,-266.5 1196,-266.5 1196,-154.5 609,-154.5"/>
<polygon fill="none" stroke="black" points="609,-154.5 609,-266.5 1196,-266.5 1196,-154.5 609,-154.5"/>
<text text-anchor="start" x="620" y="-244.3" font-family="Arial" font-size="14.00">&#45; state: SharedBRB</text>
<text text-anchor="start" x="620" y="-229.3" font-family="Arial" font-size="14.00">&#45; qp2p: QuicP2p</text>
<text text-anchor="start" x="620" y="-214.3" font-family="Arial" font-size="14.00">&#45; addr: SocketAddr</text>
<text text-anchor="start" x="620" y="-199.3" font-family="Arial" font-size="14.00">&#45; peers: HashMap&lt;Actor, SocketAddr&gt;</text>
<text text-anchor="start" x="620" y="-184.3" font-family="Arial" font-size="14.00">&#45; lastconn: HashMap&lt;SocketAddr, MyConnection&gt;</text>
<text text-anchor="start" x="620" y="-169.3" font-family="Arial" font-size="14.00">&#45; unacked_packets: VecDeque&lt;Packet&gt;</text>
<polygon fill="white" stroke="none" points="609,-27.5 609,-154.5 1196,-154.5 1196,-27.5 609,-27.5"/>
<polygon fill="none" stroke="black" points="609,-27.5 609,-154.5 1196,-154.5 1196,-27.5 609,-27.5"/>
<text text-anchor="start" x="620" y="-132.3" font-family="Arial" font-size="14.00">&#45; new(state: SharedBRB) &#45;&gt; (Self, Endpoint)</text>
<text text-anchor="start" x="620" y="-117.3" font-family="Arial" font-size="14.00">&#45; new_endpoint(&amp;self) &#45;&gt; Endpoint</text>
<text text-anchor="start" x="620" y="-102.3" font-family="Arial" font-size="14.00">&#45; resolve_actor(&amp;self, actor_id: &amp;str) &#45;&gt; Option&lt;Actor&gt;</text>
<text text-anchor="start" x="620" y="-87.3" font-family="Arial" font-size="14.00">&#45; listen_for_cmds(mut self, mut net_rx: mpsc::Receiver&lt;RouterCmd&gt;)</text>
<text text-anchor="start" x="620" y="-72.3" font-family="Arial" font-size="14.00">&#45; deliver_network_msg(&amp;mut self, network_msg: &amp;NetworkMsg, dest_addr: &amp;SocketAddr)</text>
<text text-anchor="start" x="620" y="-57.3" font-family="Arial" font-size="14.00">&#45; deliver_packet(&amp;mut self, packet: Packet)</text>
<text text-anchor="start" x="620" y="-42.3" font-family="Arial" font-size="14.00">&#45; apply(&amp;mut self, cmd: RouterCmd)</text>
<polygon fill="none" stroke="black" points="607.5,-26.5 607.5,-304.5 1196.5,-304.5 1196.5,-26.5 607.5,-26.5"/>
</a>
</g>
</g>
<!-- ndSharedBRB&#45;&gt;ndRouter -->
<g id="edge2" class="edge"><title>ndSharedBRB&#45;&gt;ndRouter</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M776.098,-366.799C786.054,-350.959 796.188,-334.837 806.164,-318.966"/>
<polygon fill="black" stroke="black" points="806.307,-318.738 806.114,-311.53 812.694,-308.578 812.887,-315.787 806.307,-318.738"/>
</g>
<!-- ndRouterCmd -->
<g id="node4" class="node"><title>ndRouterCmd</title>
<g id="a_node4_3"><a xlink:href="https://github.com/maidsafe/brb_node_qp2p/blob/master/src/brb_node.rs#:~:text=enum%20RouterCmd" xlink:title="&lt;TABLE&gt;">
<polygon fill="yellow" stroke="none" points="189,-607.5 189,-644.5 393,-644.5 393,-607.5 189,-607.5"/>
<polygon fill="none" stroke="black" points="189,-607.5 189,-644.5 393,-644.5 393,-607.5 189,-607.5"/>
<text text-anchor="start" x="251.5" y="-623.3" font-family="Arial" font-weight="bold" font-size="14.00">RouterCmd</text>
<polygon fill="white" stroke="none" points="189,-390.5 189,-607.5 393,-607.5 393,-390.5 189,-390.5"/>
<polygon fill="none" stroke="black" points="189,-390.5 189,-607.5 393,-607.5 393,-390.5 189,-390.5"/>
<text text-anchor="start" x="200" y="-585.3" font-family="Arial" font-size="14.00">Retry</text>
<text text-anchor="start" x="200" y="-570.3" font-family="Arial" font-size="14.00">Debug</text>
<text text-anchor="start" x="200" y="-555.3" font-family="Arial" font-size="14.00">AntiEntropy(String)</text>
<text text-anchor="start" x="200" y="-540.3" font-family="Arial" font-size="14.00">ListPeers</text>
<text text-anchor="start" x="200" y="-525.3" font-family="Arial" font-size="14.00">RequestJoin(String)</text>
<text text-anchor="start" x="200" y="-510.3" font-family="Arial" font-size="14.00">RequestLeave(String)</text>
<text text-anchor="start" x="200" y="-495.3" font-family="Arial" font-size="14.00">Trust(String)</text>
<text text-anchor="start" x="200" y="-480.3" font-family="Arial" font-size="14.00">Untrust(String)</text>
<text text-anchor="start" x="200" y="-465.3" font-family="Arial" font-size="14.00">SayHello(SocketAddr)</text>
<text text-anchor="start" x="200" y="-450.3" font-family="Arial" font-size="14.00">AddPeer(Actor, SocketAddr)</text>
<text text-anchor="start" x="200" y="-435.3" font-family="Arial" font-size="14.00">Deliver(Packet)</text>
<text text-anchor="start" x="200" y="-420.3" font-family="Arial" font-size="14.00">Apply(Packet)</text>
<text text-anchor="start" x="200" y="-405.3" font-family="Arial" font-size="14.00">Acked(Packet)</text>
<polygon fill="none" stroke="black" points="188,-389.5 188,-645.5 394,-645.5 394,-389.5 188,-389.5"/>
</a>
</g>
</g>
<!-- ndRouterCmd&#45;&gt;ndRepl -->
<g id="edge3" class="edge"><title>ndRouterCmd&#45;&gt;ndRepl</title>
<path fill="none" stroke="black" d="M291,-385.177C291,-371.525 291,-357.494 291,-343.446"/>
<polygon fill="black" stroke="black" points="291,-343.105 287,-337.105 291,-331.105 295,-337.105 291,-343.105"/>
</g>
<!-- ndRouterCmd&#45;&gt;ndRouter -->
<g id="edge4" class="edge"><title>ndRouterCmd&#45;&gt;ndRouter</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M385.713,-385.46C393.74,-378.608 402.182,-372.357 411,-367 480.726,-324.642 514.14,-358.358 591,-331 606.513,-325.478 622.208,-319.295 637.874,-312.651"/>
<polygon fill="black" stroke="black" points="647.094,-308.687 639.684,-316.771 642.5,-310.662 637.907,-312.637 637.907,-312.637 637.907,-312.637 642.5,-310.662 636.129,-308.503 647.094,-308.687 647.094,-308.687"/>
</g>
<!-- ndNetworkMsg -->
<g id="node5" class="node"><title>ndNetworkMsg</title>
<g id="a_node5_4"><a xlink:href="https://github.com/maidsafe/brb_node_qp2p/blob/master/src/brb_node.rs#:~:text=enum%20NetworkMsg" xlink:title="&lt;TABLE&gt;">
<polygon fill="yellow" stroke="none" points="971,-532.5 971,-569.5 1149,-569.5 1149,-532.5 971,-532.5"/>
<polygon fill="none" stroke="black" points="971,-532.5 971,-569.5 1149,-569.5 1149,-532.5 971,-532.5"/>
<text text-anchor="start" x="1016" y="-548.3" font-family="Arial" font-weight="bold" font-size="14.00">NetworkMsg</text>
<polygon fill="white" stroke="none" points="971,-465.5 971,-532.5 1149,-532.5 1149,-465.5 971,-465.5"/>
<polygon fill="none" stroke="black" points="971,-465.5 971,-532.5 1149,-532.5 1149,-465.5 971,-465.5"/>
<text text-anchor="start" x="982" y="-510.3" font-family="Arial" font-size="14.00">Peer(Actor, SocketAddr)</text>
<text text-anchor="start" x="982" y="-495.3" font-family="Arial" font-size="14.00">Packet(Packet)</text>
<text text-anchor="start" x="982" y="-480.3" font-family="Arial" font-size="14.00">Ack(Packet)</text>
<polygon fill="none" stroke="black" points="970,-464.5 970,-570.5 1150,-570.5 1150,-464.5 970,-464.5"/>
</a>
</g>
</g>
<!-- ndNetworkMsg&#45;&gt;ndRouter -->
<g id="edge5" class="edge"><title>ndNetworkMsg&#45;&gt;ndRouter</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1034.61,-460.266C1017.2,-421.701 993.218,-368.565 970.426,-318.077"/>
<polygon fill="black" stroke="black" points="966.186,-308.685 974.402,-315.948 968.244,-313.242 970.301,-317.799 970.301,-317.799 970.301,-317.799 968.244,-313.242 966.199,-319.651 966.186,-308.685 966.186,-308.685"/>
</g>
<!-- ndMyConnection -->
<g id="node6" class="node"><title>ndMyConnection</title>
<g id="a_node6_5"><a xlink:href="https://github.com/maidsafe/brb_node_qp2p/blob/master/src/brb_node.rs#:~:text=struct%20MyConnection" xlink:title="&lt;TABLE&gt;">
<polygon fill="lightblue" stroke="none" points="1186,-535.5 1186,-572.5 1541,-572.5 1541,-535.5 1186,-535.5"/>
<polygon fill="none" stroke="black" points="1186,-535.5 1186,-572.5 1541,-572.5 1541,-535.5 1186,-535.5"/>
<text text-anchor="start" x="1312.5" y="-551.3" font-family="Arial" font-weight="bold" font-size="14.00">MyConnection</text>
<polygon fill="white" stroke="none" points="1186,-498.5 1186,-535.5 1541,-535.5 1541,-498.5 1186,-498.5"/>
<polygon fill="none" stroke="black" points="1186,-498.5 1186,-535.5 1541,-535.5 1541,-498.5 1186,-498.5"/>
<text text-anchor="start" x="1197" y="-513.3" font-family="Arial" font-size="14.00">&#45; Connection</text>
<polygon fill="white" stroke="none" points="1186,-461.5 1186,-498.5 1541,-498.5 1541,-461.5 1186,-461.5"/>
<polygon fill="none" stroke="black" points="1186,-461.5 1186,-498.5 1541,-498.5 1541,-461.5 1186,-461.5"/>
<text text-anchor="start" x="1197" y="-476.3" font-family="Arial" font-size="14.00">&#45; fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;&#39;_&gt;) &#45;&gt; fmt::Result</text>
<polygon fill="none" stroke="black" points="1184.5,-461 1184.5,-574 1541.5,-574 1541.5,-461 1184.5,-461"/>
</a>
</g>
</g>
</g>
</svg>
