<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: ml Pages: 1 -->
<svg width="1214pt" height="676pt"
 viewBox="0.00 0.00 1214.00 676.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 672)">
<title>ml</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-672 1210,-672 1210,4 -4,4"/>
<!-- ndSharedBRB -->
<g id="node1" class="node"><title>ndSharedBRB</title>
<polygon fill="lightblue" stroke="none" points="478,-625.5 478,-662.5 983,-662.5 983,-625.5 478,-625.5"/>
<polygon fill="none" stroke="black" points="478,-625.5 478,-662.5 983,-662.5 983,-625.5 478,-625.5"/>
<text text-anchor="start" x="689.5" y="-641.3" font-family="Arial" font-weight="bold" font-size="14.00">SharedBRB</text>
<polygon fill="white" stroke="none" points="478,-588.5 478,-625.5 983,-625.5 983,-588.5 478,-588.5"/>
<polygon fill="none" stroke="black" points="478,-588.5 478,-625.5 983,-625.5 983,-588.5 478,-588.5"/>
<text text-anchor="start" x="489" y="-603.3" font-family="Arial" font-size="14.00">&#45; brb: Arc&lt;Mutex&lt;BRB&gt;&gt;</text>
<polygon fill="white" stroke="none" points="478,-371.5 478,-588.5 983,-588.5 983,-371.5 478,-371.5"/>
<polygon fill="none" stroke="black" points="478,-371.5 478,-588.5 983,-588.5 983,-371.5 478,-371.5"/>
<text text-anchor="start" x="489" y="-566.3" font-family="Arial" font-size="14.00">&#45; new() &#45;&gt; Self</text>
<text text-anchor="start" x="489" y="-551.3" font-family="Arial" font-size="14.00">&#45; actor(&amp;self) &#45;&gt; Actor</text>
<text text-anchor="start" x="489" y="-536.3" font-family="Arial" font-size="14.00">&#45; add(&amp;self, v: Value) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="489" y="-521.3" font-family="Arial" font-size="14.00">&#45; rm(&amp;self, v: Value) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="489" y="-506.3" font-family="Arial" font-size="14.00">&#45; peers(&amp;self) &#45;&gt; BTreeSet&lt;Actor&gt;</text>
<text text-anchor="start" x="489" y="-491.3" font-family="Arial" font-size="14.00">&#45; trust_peer(&amp;mut self, peer: Actor)</text>
<text text-anchor="start" x="489" y="-476.3" font-family="Arial" font-size="14.00">&#45; untrust_peer(&amp;mut self, peer: Actor)</text>
<text text-anchor="start" x="489" y="-461.3" font-family="Arial" font-size="14.00">&#45; request_join(&amp;mut self, actor: Actor) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="489" y="-446.3" font-family="Arial" font-size="14.00">&#45; request_leave(&amp;mut self, actor: Actor) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="489" y="-431.3" font-family="Arial" font-size="14.00">&#45; anti_entropy(&amp;mut self, peer: Actor) &#45;&gt; Option&lt;Packet&gt;</text>
<text text-anchor="start" x="489" y="-416.3" font-family="Arial" font-size="14.00">&#45; exec_op(&amp;self, op: &lt;State as BRBDataType&lt;Actor&gt;&gt;::Op) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="489" y="-401.3" font-family="Arial" font-size="14.00">&#45; apply(&amp;self, packet: Packet) &#45;&gt; Vec&lt;Packet&gt;</text>
<text text-anchor="start" x="489" y="-386.3" font-family="Arial" font-size="14.00">&#45; read(&amp;self) &#45;&gt; HashSet&lt;Value&gt;</text>
<polygon fill="none" stroke="black" points="476.5,-371 476.5,-664 983.5,-664 983.5,-371 476.5,-371"/>
</g>
<!-- ndRepl -->
<g id="node2" class="node"><title>ndRepl</title>
<polygon fill="lightblue" stroke="none" points="9,-288.5 9,-325.5 573,-325.5 573,-288.5 9,-288.5"/>
<polygon fill="none" stroke="black" points="9,-288.5 9,-325.5 573,-325.5 573,-288.5 9,-288.5"/>
<text text-anchor="start" x="275.5" y="-304.3" font-family="Arial" font-weight="bold" font-size="14.00">Repl</text>
<polygon fill="white" stroke="none" points="9,-236.5 9,-288.5 573,-288.5 573,-236.5 9,-236.5"/>
<polygon fill="none" stroke="black" points="9,-236.5 9,-288.5 573,-288.5 573,-236.5 9,-236.5"/>
<text text-anchor="start" x="20" y="-266.3" font-family="Arial" font-size="14.00">&#45; state: SharedBRB</text>
<text text-anchor="start" x="20" y="-251.3" font-family="Arial" font-size="14.00">&#45; network_tx: mpsc::Sender&lt;RouterCmd&gt;</text>
<polygon fill="white" stroke="none" points="9,-4.5 9,-236.5 573,-236.5 573,-4.5 9,-4.5"/>
<polygon fill="none" stroke="black" points="9,-4.5 9,-236.5 573,-236.5 573,-4.5 9,-4.5"/>
<text text-anchor="start" x="20" y="-214.3" font-family="Arial" font-size="14.00">&#45; new(state: SharedBRB, network_tx: mpsc::Sender&lt;RouterCmd&gt;) &#45;&gt; Self</text>
<text text-anchor="start" x="20" y="-199.3" font-family="Arial" font-size="14.00">&#45; after_command(&amp;mut self, _line: &amp;Line, result: CommandResult) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-184.3" font-family="Arial" font-size="14.00">&#45; peer(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-169.3" font-family="Arial" font-size="14.00">&#45; peers(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-154.3" font-family="Arial" font-size="14.00">&#45; trust(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-139.3" font-family="Arial" font-size="14.00">&#45; untrust(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-124.3" font-family="Arial" font-size="14.00">&#45; join(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-109.3" font-family="Arial" font-size="14.00">&#45; leave(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-94.3" font-family="Arial" font-size="14.00">&#45; anti_entropy(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-79.3" font-family="Arial" font-size="14.00">&#45; retry(&amp;mut self, _args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-64.3" font-family="Arial" font-size="14.00">&#45; add(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-49.3" font-family="Arial" font-size="14.00">&#45; remove(&amp;mut self, args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-34.3" font-family="Arial" font-size="14.00">&#45; read(&amp;mut self, _args: &amp;[String]) &#45;&gt; CommandResult</text>
<text text-anchor="start" x="20" y="-19.3" font-family="Arial" font-size="14.00">&#45; dbg(&amp;mut self, _args: &amp;[String]) &#45;&gt; CommandResult</text>
<polygon fill="none" stroke="black" points="8,-4 8,-327 574,-327 574,-4 8,-4"/>
</g>
<!-- ndSharedBRB&#45;&gt;ndRepl -->
<g id="edge1" class="edge"><title>ndSharedBRB&#45;&gt;ndRepl</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M542.233,-366.799C530.564,-357.496 518.773,-348.096 506.996,-338.706"/>
<polygon fill="black" stroke="black" points="506.939,-338.661 499.754,-338.048 497.556,-331.18 504.741,-331.793 506.939,-338.661"/>
</g>
<!-- ndRouter -->
<g id="node3" class="node"><title>ndRouter</title>
<polygon fill="lightblue" stroke="none" points="609,-202.5 609,-239.5 947,-239.5 947,-202.5 609,-202.5"/>
<polygon fill="none" stroke="black" points="609,-202.5 609,-239.5 947,-239.5 947,-202.5 609,-202.5"/>
<text text-anchor="start" x="754.5" y="-218.3" font-family="Arial" font-weight="bold" font-size="14.00">Router</text>
<polygon fill="white" stroke="none" points="609,-90.5 609,-202.5 947,-202.5 947,-90.5 609,-90.5"/>
<polygon fill="none" stroke="black" points="609,-90.5 609,-202.5 947,-202.5 947,-90.5 609,-90.5"/>
<text text-anchor="start" x="620" y="-180.3" font-family="Arial" font-size="14.00">&#45; state: SharedBRB</text>
<text text-anchor="start" x="620" y="-165.3" font-family="Arial" font-size="14.00">&#45; qp2p: QuicP2p</text>
<text text-anchor="start" x="620" y="-150.3" font-family="Arial" font-size="14.00">&#45; addr: SocketAddr</text>
<text text-anchor="start" x="620" y="-135.3" font-family="Arial" font-size="14.00">&#45; peers: HashMap&lt;Actor, SocketAddr&gt;</text>
<text text-anchor="start" x="620" y="-120.3" font-family="Arial" font-size="14.00">&#45; lastconn: HashMap&lt;SocketAddr, MyConnection&gt;</text>
<text text-anchor="start" x="620" y="-105.3" font-family="Arial" font-size="14.00">&#45; unacked_packets: VecDeque&lt;Packet&gt;</text>
<polygon fill="none" stroke="black" points="608,-90 608,-241 948,-241 948,-90 608,-90"/>
</g>
<!-- ndSharedBRB&#45;&gt;ndRouter -->
<g id="edge2" class="edge"><title>ndSharedBRB&#45;&gt;ndRouter</title>
<path fill="none" stroke="black" d="M750.53,-366.799C755.633,-329.593 760.949,-290.828 765.53,-257.424"/>
<polygon fill="black" stroke="black" points="765.553,-257.262 762.405,-250.774 767.183,-245.373 770.331,-251.861 765.553,-257.262"/>
</g>
<!-- ndRouterCmd -->
<g id="node4" class="node"><title>ndRouterCmd</title>
<polygon fill="yellow" stroke="none" points="189,-607.5 189,-644.5 393,-644.5 393,-607.5 189,-607.5"/>
<polygon fill="none" stroke="black" points="189,-607.5 189,-644.5 393,-644.5 393,-607.5 189,-607.5"/>
<text text-anchor="start" x="251.5" y="-623.3" font-family="Arial" font-weight="bold" font-size="14.00">RouterCmd</text>
<polygon fill="white" stroke="none" points="189,-390.5 189,-607.5 393,-607.5 393,-390.5 189,-390.5"/>
<polygon fill="none" stroke="black" points="189,-390.5 189,-607.5 393,-607.5 393,-390.5 189,-390.5"/>
<text text-anchor="start" x="200" y="-585.3" font-family="Arial" font-size="14.00">Retry</text>
<text text-anchor="start" x="200" y="-570.3" font-family="Arial" font-size="14.00">Debug</text>
<text text-anchor="start" x="200" y="-555.3" font-family="Arial" font-size="14.00">AntiEntropy(String)</text>
<text text-anchor="start" x="200" y="-540.3" font-family="Arial" font-size="14.00">ListPeers</text>
<text text-anchor="start" x="200" y="-525.3" font-family="Arial" font-size="14.00">RequestJoin(String)</text>
<text text-anchor="start" x="200" y="-510.3" font-family="Arial" font-size="14.00">RequestLeave(String)</text>
<text text-anchor="start" x="200" y="-495.3" font-family="Arial" font-size="14.00">Trust(String)</text>
<text text-anchor="start" x="200" y="-480.3" font-family="Arial" font-size="14.00">Untrust(String)</text>
<text text-anchor="start" x="200" y="-465.3" font-family="Arial" font-size="14.00">SayHello(SocketAddr)</text>
<text text-anchor="start" x="200" y="-450.3" font-family="Arial" font-size="14.00">AddPeer(Actor, SocketAddr)</text>
<text text-anchor="start" x="200" y="-435.3" font-family="Arial" font-size="14.00">Deliver(Packet)</text>
<text text-anchor="start" x="200" y="-420.3" font-family="Arial" font-size="14.00">Apply(Packet)</text>
<text text-anchor="start" x="200" y="-405.3" font-family="Arial" font-size="14.00">Acked(Packet)</text>
<polygon fill="none" stroke="black" points="188,-389.5 188,-645.5 394,-645.5 394,-389.5 188,-389.5"/>
</g>
<!-- ndRouterCmd&#45;&gt;ndRepl -->
<g id="edge3" class="edge"><title>ndRouterCmd&#45;&gt;ndRepl</title>
<path fill="none" stroke="black" d="M291,-385.177C291,-371.525 291,-357.494 291,-343.446"/>
<polygon fill="black" stroke="black" points="291,-343.105 287,-337.105 291,-331.105 295,-337.105 291,-343.105"/>
</g>
<!-- ndNetworkMsg -->
<g id="node5" class="node"><title>ndNetworkMsg</title>
<polygon fill="yellow" stroke="none" points="1019,-532.5 1019,-569.5 1197,-569.5 1197,-532.5 1019,-532.5"/>
<polygon fill="none" stroke="black" points="1019,-532.5 1019,-569.5 1197,-569.5 1197,-532.5 1019,-532.5"/>
<text text-anchor="start" x="1064" y="-548.3" font-family="Arial" font-weight="bold" font-size="14.00">NetworkMsg</text>
<polygon fill="white" stroke="none" points="1019,-465.5 1019,-532.5 1197,-532.5 1197,-465.5 1019,-465.5"/>
<polygon fill="none" stroke="black" points="1019,-465.5 1019,-532.5 1197,-532.5 1197,-465.5 1019,-465.5"/>
<text text-anchor="start" x="1030" y="-510.3" font-family="Arial" font-size="14.00">Peer(Actor, SocketAddr)</text>
<text text-anchor="start" x="1030" y="-495.3" font-family="Arial" font-size="14.00">Packet(Packet)</text>
<text text-anchor="start" x="1030" y="-480.3" font-family="Arial" font-size="14.00">Ack(Packet)</text>
<polygon fill="none" stroke="black" points="1018,-464.5 1018,-570.5 1198,-570.5 1198,-464.5 1018,-464.5"/>
</g>
</g>
</svg>
